<!DOCTYPE html>
<html>
<head>
  <title>PostMessage Test (No Extension)</title>
</head>
<body>

  <h1>Thunkable ↔ HTML Test</h1>

  <!-- 1. Message received from Thunkable will appear here -->
  <p>From Thunkable: <span id="fromApp" style="color:blue; font-weight:bold;">nothing yet</span></p>

  <br><br>

  <!-- 2. Click this button → sends message back to Thunkable -->
  <button onclick="sendToApp()" style="font-size:20px; padding:15px;">
    Send "hello-from-web" to Thunkable
  </button>

  <script>
    // Receive message FROM Thunkable (app → web)
    window.addEventListener("message", function(event) {
      // Optional safety: you can check event.origin if you want
      document.getElementById("fromApp").innerText = event.data;
      console.log("Received from Thunkable:", event.data);
    });

    // Send message TO Thunkable (web → app)
    function sendToApp() {
      // This works in Thunkable Web Viewer (both Android & iOS)
      window.parent.postMessage("hello-from-web", "*");
      alert("Sent 'hello-from-web' to Thunkable!");
    }

    // Optional: tell Thunkable the page is ready
    setTimeout(() => {
      window.parent.postMessage("web-ready", "*");
    }, 500);
  </script>

</body>
</html>